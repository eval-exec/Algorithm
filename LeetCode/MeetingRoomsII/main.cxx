#include <bits/stdc++.h>
#include <gtest/gtest.h>

using namespace std;


class Solution {
public:
    int minMeetingRooms(vector<vector<int>> &intervals) {
        sort(intervals.begin(), intervals.end(), [](const vector<int> &v1, const vector<int> &v2) -> bool {
            if (v1[0] == v2[0]) return v1[1] < v2[1];
            return v1[0] < v2[0];
        });

        multiset<int> ss;
        int maxRoom = 0;
        for (auto &interval : intervals) {
            for (auto i = ss.begin(); i != ss.end();) {
                if (*i <= interval[0]) {
                    ss.erase(i);
                }
                i++;
            }
            ss.insert(interval[1]);
            maxRoom = max(maxRoom, int(ss.size()));
        }
        return maxRoom;
    }
};


struct T {
    vector<vector<int>> rooms;
    int expect;

};


TEST(Solution, test) {
    T ts[] = {
            {
                    {{{4, 9},  {1, 3},  {6, 13}, {8, 17}, {1, 3},  {2, 5},  {8, 17}, {1, 3},  {3, 7},  {8, 17}, {3, 7},  {8, 17}, {6, 13}, {1, 3},  {7, 15}, {6, 13}, {5, 11}, {8, 17}, {1, 3},  {4, 9},  {3, 7},  {4, 9},  {3, 7},  {5, 11}, {2, 5},  {1, 3},  {8, 17}, {8, 17}, {9, 19}, {3, 7},  {2, 5},  {7, 15}, {2, 5},  {2, 5},  {7, 15}, {1, 3},  {7, 15}, {0, 1},  {0, 1},  {0, 1},  {2, 5},  {3, 7},  {3, 7},  {7, 15}, {4, 9},  {2, 5},  {8, 17}, {1, 3},  {9, 19}, {5, 11}, {7, 15}, {4, 9},  {7, 15}, {5, 11}, {8, 17}, {6, 13}, {6, 13}, {2, 5},  {6, 13}, {8, 17}, {9, 19}, {8, 17}, {8, 17}, {7, 15}, {0, 1},  {5, 11}, {7, 15}, {4, 9},  {7, 15}, {9, 19}, {7, 15}, {2, 5},  {0, 1},  {8, 17}, {2, 5},  {5, 11}, {9, 19}, {5, 11}, {4, 9},  {5, 11}, {3, 7},  {1, 3},  {8, 17}, {1, 3},  {5, 11}, {6, 13}, {2, 5},  {8, 17}, {4, 9},  {5, 11}, {9, 19}, {4, 9},  {4, 9},  {4, 9},  {3, 7},  {0, 1},  {7, 15}, {0, 1},  {6, 13}, {3, 7}}},
                    56
            },
            {

                    {{{6, 13}, {4, 9},  {1, 3},  {2, 5},  {9, 19}, {7, 15}, {9, 19}, {0, 1},  {5, 11}, {6, 13}, {6, 13}, {6, 13}, {0, 1},  {8, 17}, {3, 7},  {5, 11}, {4, 9},  {1, 3},  {9, 19}, {6, 13}, {8, 17}, {8, 17}, {0, 1},  {4, 9},  {1, 3},  {4, 9},  {4, 9},  {3, 7},  {2, 5},  {7, 15}, {6, 13}, {9, 19}, {6, 13}, {7, 15}, {2, 5},  {8, 17}, {7, 15}, {3, 7},  {3, 7},  {8, 17}, {7, 15}, {0, 1},  {9, 19}, {5, 11}, {0, 1},  {5, 11}, {7, 15}, {5, 11}, {8, 17}, {7, 15}, {1, 3},  {0, 1},  {0, 1},  {1, 3},  {9, 19}, {4, 9},  {7, 15}, {1, 3},  {9, 19}, {3, 7},  {3, 7},  {4, 9},  {4, 9},  {2, 5},  {3, 7},  {8, 17}, {2, 5},  {5, 11}, {6, 13}, {5, 11}, {2, 5},  {8, 17}, {1, 3},  {1, 3},  {9, 19}, {0, 1},  {0, 1},  {7, 15}, {9, 19}, {7, 15}, {5, 11}, {3, 7},  {3, 7},  {1, 3},  {2, 5},  {3, 7},  {0, 1},  {4, 9},  {4, 9},  {6, 13}, {5, 11}, {2, 5},  {9, 19}, {4, 9},  {2, 5},  {3, 7},  {4, 9},  {8, 17}, {4, 9},  {2, 5}}},
                    50
            },
            {

                    {{{8, 17}, {4, 9},  {4, 9},  {8, 17}, {9, 19}, {2, 5},  {9, 19}, {4, 9},  {3, 7},  {6, 13}, {6, 13}, {5, 11}, {2, 5},  {2, 5},  {8, 17}, {4, 9},  {5, 11}, {8, 17}, {1, 3},  {1, 3},  {9, 19}, {0, 1},  {0, 1},  {7, 15}, {5, 11}, {0, 1},  {6, 13}, {4, 9},  {9, 19}, {3, 7},  {7, 15}, {8, 17}, {8, 17}, {3, 7},  {2, 5},  {5, 11}, {0, 1},  {9, 19}, {6, 13}, {9, 19}, {7, 15}, {5, 11}, {7, 15}, {1, 3},  {2, 5},  {0, 1},  {4, 9},  {5, 11}, {9, 19}, {2, 5},  {4, 9},  {1, 3},  {8, 17}, {8, 17}, {5, 11}, {4, 9},  {7, 15}, {9, 19}, {5, 11}, {1, 3},  {1, 3},  {5, 11}, {0, 1},  {4, 9},  {8, 17}, {9, 19}, {7, 15}, {4, 9},  {7, 15}, {6, 13}, {3, 7},  {4, 9},  {2, 5},  {2, 5},  {7, 15}, {4, 9},  {6, 13}, {3, 7},  {8, 17}, {4, 9},  {2, 5},  {3, 7},  {9, 19}, {5, 11}, {5, 11}, {5, 11}, {6, 13}, {3, 7},  {1, 3},  {5, 11}, {5, 11}, {6, 13}, {4, 9},  {5, 11}, {0, 1},  {7, 15}, {4, 9},  {3, 7},  {0, 1},  {7, 15}}},
                    58
            },
            {

                    {{{9, 19}, {3, 7},  {9, 19}, {3, 7},  {6, 13}, {0, 1},  {0, 1},  {5, 11}, {9, 19}, {2, 5},  {7, 15}, {4, 9},  {4, 9},  {2, 5},  {7, 15}, {0, 1},  {7, 15}, {9, 19}, {3, 7},  {6, 13}, {1, 3},  {0, 1},  {1, 3},  {6, 13}, {8, 17}, {1, 3},  {1, 3},  {2, 5},  {7, 15}, {2, 5},  {8, 17}, {1, 3},  {9, 19}, {5, 11}, {1, 3},  {8, 17}, {5, 11}, {6, 13}, {9, 19}, {4, 9},  {8, 17}, {0, 1},  {9, 19}, {2, 5},  {4, 9},  {1, 3},  {5, 11}, {3, 7},  {8, 17}, {5, 11}, {0, 1},  {6, 13}, {7, 15}, {4, 9},  {7, 15}, {8, 17}, {1, 3},  {6, 13}, {5, 11}, {0, 1},  {8, 17}, {7, 15}, {9, 19}, {5, 11}, {4, 9},  {0, 1},  {8, 17}, {0, 1},  {6, 13}, {6, 13}, {8, 17}, {7, 15}, {0, 1},  {8, 17}, {9, 19}, {7, 15}, {1, 3},  {4, 9},  {7, 15}, {2, 5},  {2, 5},  {8, 17}, {4, 9},  {5, 11}, {5, 11}, {2, 5},  {4, 9},  {3, 7},  {7, 15}, {8, 17}, {4, 9},  {9, 19}, {0, 1},  {0, 1},  {2, 5},  {4, 9},  {1, 3},  {4, 9},  {6, 13}, {6, 13}}},
                    54
            },
            {

                    {{{6, 13}, {0, 1},  {0, 1},  {3, 7},  {3, 7},  {0, 1},  {0, 1},  {3, 7},  {2, 5},  {1, 3},  {7, 15}, {5, 11}, {9, 19}, {8, 17}, {5, 11}, {1, 3},  {8, 17}, {8, 17}, {0, 1},  {4, 9},  {1, 3},  {0, 1},  {3, 7},  {0, 1},  {1, 3},  {3, 7},  {2, 5},  {7, 15}, {6, 13}, {8, 17}, {5, 11}, {4, 9},  {2, 5},  {8, 17}, {2, 5},  {6, 13}, {2, 5},  {5, 11}, {3, 7},  {9, 19}, {0, 1},  {7, 15}, {4, 9},  {2, 5},  {4, 9},  {9, 19}, {7, 15}, {4, 9},  {5, 11}, {2, 5},  {9, 19}, {0, 1},  {7, 15}, {5, 11}, {4, 9},  {8, 17}, {7, 15}, {9, 19}, {1, 3},  {3, 7},  {2, 5},  {2, 5},  {0, 1},  {8, 17}, {7, 15}, {0, 1},  {9, 19}, {2, 5},  {7, 15}, {1, 3},  {8, 17}, {3, 7},  {1, 3},  {5, 11}, {0, 1},  {1, 3},  {4, 9},  {2, 5},  {9, 19}, {1, 3},  {8, 17}, {7, 15}, {0, 1},  {7, 15}, {0, 1},  {4, 9},  {8, 17}, {9, 19}, {1, 3},  {7, 15}, {0, 1},  {9, 19}, {8, 17}, {1, 3},  {6, 13}, {0, 1},  {2, 5},  {8, 17}, {0, 1},  {0, 1}}},
                    43
            },
            {

                    {{{5, 11}, {8, 17}, {7, 15}, {0, 1},  {5, 11}, {2, 5},  {9, 19}, {7, 15}, {7, 15}, {6, 13}, {5, 11}, {3, 7},  {4, 9},  {5, 11}, {6, 13}, {5, 11}, {2, 5},  {7, 15}, {8, 17}, {0, 1},  {5, 11}, {0, 1},  {9, 19}, {3, 7},  {8, 17}, {3, 7},  {4, 9},  {9, 19}, {1, 3},  {4, 9},  {3, 7},  {3, 7},  {8, 17}, {8, 17}, {7, 15}, {7, 15}, {8, 17}, {8, 17}, {7, 15}, {5, 11}, {6, 13}, {8, 17}, {8, 17}, {2, 5},  {9, 19}, {2, 5},  {3, 7},  {4, 9},  {5, 11}, {6, 13}, {3, 7},  {1, 3},  {2, 5},  {1, 3},  {0, 1},  {0, 1},  {8, 17}, {8, 17}, {0, 1},  {3, 7},  {1, 3},  {1, 3},  {5, 11}, {3, 7},  {3, 7},  {4, 9},  {5, 11}, {2, 5},  {6, 13}, {2, 5},  {8, 17}, {3, 7},  {8, 17}, {3, 7},  {9, 19}, {9, 19}, {1, 3},  {5, 11}, {2, 5},  {4, 9},  {4, 9},  {4, 9},  {3, 7},  {3, 7},  {4, 9},  {5, 11}, {5, 11}, {8, 17}, {2, 5},  {0, 1},  {4, 9},  {4, 9},  {9, 19}, {9, 19}, {2, 5},  {1, 3},  {1, 3},  {5, 11}, {1, 3},  {8, 17}}},
                    52
            },
            {

                    {{{5, 11}, {7, 15}, {1, 3},  {1, 3},  {8, 17}, {3, 7},  {7, 15}, {2, 5},  {6, 13}, {9, 19}, {4, 9},  {4, 9},  {9, 19}, {3, 7},  {8, 17}, {3, 7},  {3, 7},  {1, 3},  {8, 17}, {5, 11}, {5, 11}, {2, 5},  {5, 11}, {0, 1},  {1, 3},  {7, 15}, {9, 19}, {2, 5},  {0, 1},  {8, 17}, {7, 15}, {4, 9},  {0, 1},  {8, 17}, {4, 9},  {8, 17}, {9, 19}, {3, 7},  {7, 15}, {6, 13}, {6, 13}, {5, 11}, {4, 9},  {3, 7},  {0, 1},  {3, 7},  {2, 5},  {8, 17}, {9, 19}, {6, 13}, {8, 17}, {2, 5},  {4, 9},  {6, 13}, {2, 5},  {4, 9},  {0, 1},  {9, 19}, {3, 7},  {4, 9},  {1, 3},  {4, 9},  {1, 3},  {8, 17}, {8, 17}, {7, 15}, {4, 9},  {9, 19}, {9, 19}, {5, 11}, {1, 3},  {4, 9},  {3, 7},  {1, 3},  {7, 15}, {9, 19}, {9, 19}, {9, 19}, {6, 13}, {6, 13}, {4, 9},  {1, 3},  {7, 15}, {2, 5},  {2, 5},  {0, 1},  {8, 17}, {4, 9},  {9, 19}, {8, 17}, {3, 7},  {3, 7},  {4, 9},  {3, 7},  {7, 15}, {6, 13}, {5, 11}, {5, 11}, {4, 9},  {7, 15}}},
                    53
            },
            {

                    {{{5, 11}, {9, 19}, {7, 15}, {6, 13}, {4, 9},  {6, 13}, {1, 3},  {1, 3},  {9, 19}, {7, 15}, {0, 1},  {6, 13}, {8, 17}, {0, 1},  {0, 1},  {4, 9},  {1, 3},  {5, 11}, {5, 11}, {8, 17}, {7, 15}, {5, 11}, {8, 17}, {3, 7},  {4, 9},  {2, 5},  {3, 7},  {8, 17}, {6, 13}, {3, 7},  {2, 5},  {9, 19}, {1, 3},  {8, 17}, {9, 19}, {3, 7},  {2, 5},  {8, 17}, {5, 11}, {4, 9},  {7, 15}, {4, 9},  {2, 5},  {4, 9},  {1, 3},  {2, 5},  {7, 15}, {0, 1},  {8, 17}, {8, 17}, {6, 13}, {0, 1},  {0, 1},  {2, 5},  {2, 5},  {6, 13}, {7, 15}, {9, 19}, {5, 11}, {7, 15}, {6, 13}, {2, 5},  {7, 15}, {6, 13}, {9, 19}, {1, 3},  {4, 9},  {8, 17}, {0, 1},  {0, 1},  {2, 5},  {5, 11}, {3, 7},  {8, 17}, {4, 9},  {3, 7},  {7, 15}, {6, 13}, {0, 1},  {1, 3},  {0, 1},  {5, 11}, {5, 11}, {2, 5},  {3, 7},  {7, 15}, {0, 1},  {3, 7},  {2, 5},  {2, 5},  {7, 15}, {3, 7},  {9, 19}, {4, 9},  {1, 3},  {2, 5},  {2, 5},  {6, 13}, {9, 19}, {6, 13}}},
                    50
            },
            {

                    {{{4, 9},  {3, 7},  {5, 11}, {0, 1},  {4, 9},  {6, 13}, {7, 15}, {4, 9},  {6, 13}, {7, 15}, {5, 11}, {9, 19}, {2, 5},  {5, 11}, {9, 19}, {0, 1},  {7, 15}, {0, 1},  {2, 5},  {3, 7},  {3, 7},  {5, 11}, {0, 1},  {2, 5},  {9, 19}, {9, 19}, {1, 3},  {4, 9},  {2, 5},  {3, 7},  {7, 15}, {2, 5},  {4, 9},  {1, 3},  {4, 9},  {4, 9},  {1, 3},  {5, 11}, {3, 7},  {6, 13}, {2, 5},  {7, 15}, {7, 15}, {7, 15}, {5, 11}, {9, 19}, {5, 11}, {6, 13}, {0, 1},  {6, 13}, {1, 3},  {7, 15}, {2, 5},  {0, 1},  {5, 11}, {0, 1},  {4, 9},  {4, 9},  {8, 17}, {8, 17}, {2, 5},  {7, 15}, {6, 13}, {9, 19}, {6, 13}, {7, 15}, {9, 19}, {0, 1},  {9, 19}, {4, 9},  {1, 3},  {3, 7},  {3, 7},  {0, 1},  {3, 7},  {7, 15}, {6, 13}, {6, 13}, {3, 7},  {9, 19}, {1, 3},  {3, 7},  {6, 13}, {7, 15}, {0, 1},  {1, 3},  {6, 13}, {7, 15}, {1, 3},  {8, 17}, {7, 15}, {1, 3},  {0, 1},  {9, 19}, {7, 15}, {3, 7},  {9, 19}, {5, 11}, {4, 9},  {9, 19}}},
                    50
            },
            {

                    {{{9, 19}, {8, 17}, {9, 19}, {8, 17}, {8, 17}, {8, 17}, {8, 17}, {1, 3},  {1, 3},  {1, 3},  {5, 11}, {6, 13}, {8, 17}, {6, 13}, {5, 11}, {0, 1},  {3, 7},  {3, 7},  {0, 1},  {8, 17}, {2, 5},  {0, 1},  {8, 17}, {7, 15}, {5, 11}, {8, 17}, {6, 13}, {7, 15}, {7, 15}, {7, 15}, {3, 7},  {2, 5},  {0, 1},  {8, 17}, {7, 15}, {8, 17}, {4, 9},  {5, 11}, {7, 15}, {4, 9},  {2, 5},  {9, 19}, {1, 3},  {9, 19}, {3, 7},  {4, 9},  {6, 13}, {2, 5},  {3, 7},  {6, 13}, {7, 15}, {7, 15}, {4, 9},  {0, 1},  {4, 9},  {6, 13}, {5, 11}, {1, 3},  {5, 11}, {0, 1},  {2, 5},  {8, 17}, {5, 11}, {8, 17}, {3, 7},  {1, 3},  {5, 11}, {0, 1},  {5, 11}, {7, 15}, {4, 9},  {4, 9},  {2, 5},  {2, 5},  {9, 19}, {2, 5},  {6, 13}, {9, 19}, {8, 17}, {3, 7},  {9, 19}, {2, 5},  {6, 13}, {2, 5},  {3, 7},  {3, 7},  {0, 1},  {7, 15}, {6, 13}, {3, 7},  {7, 15}, {5, 11}, {1, 3},  {3, 7},  {8, 17}, {8, 17}, {3, 7},  {8, 17}, {9, 19}, {5, 11}}},
                    56
            },

    };


    for (T t : ts) {
        Solution solution;
        EXPECT_EQ(solution.minMeetingRooms(t.rooms), t.expect);

    }
}

int main() {
    testing::InitGoogleTest();

    return RUN_ALL_TESTS();
}


